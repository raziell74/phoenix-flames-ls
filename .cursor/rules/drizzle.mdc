---
description: Sets code quality rules for Drizzle
globs: src/server/**/*.{ts,js,tsx,jsx}, drizzle/**/*.{ts,js}
---
#### **Drizzle**

- **ORM Integration:**
  - Use Drizzle to define clear, type‑safe database schemas that align with your data models.
  - Write queries using Drizzle’s type‑safe DSL to catch errors at compile time.

- **Query Best Practices:**
  - Structure queries for clarity and include inline documentation for complex logic.
  - Use parameterized queries and proper abstractions to prevent SQL injection.
  - Optimize queries to avoid redundant calls and common pitfalls like N+1 issues.

- **Modularity & Reusability:**
  - Organize query logic into modular, reusable functions that adhere to DRY principles.
  - Isolate business logic from data access to enhance testability and maintainability.

- **Integration:**
  - Ensure smooth interaction with tRPC and Next.js by keeping Drizzle models and TypeScript types in sync.
  - Validate data flows using schemas (e.g., Zod) for robust contracts.

- **Documentation:**
  - Document schema definitions and complex query logic to aid future maintenance.
